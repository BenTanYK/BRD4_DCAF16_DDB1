source leaprc.protein.ff19SB
source leaprc.water.tip3p
addAtomTypes { { "ZN" "Zn" "sp3" } { "S3" "S" "sp3" } } # Add atom types for the ZAFF metal center
loadamberparams frcmod.ions1lm_126_tip3p #Load the Li/Merz 12-6 parameter set for monovalent ions
loadamberprep ZAFF.prep #Load ZAFF prep file
loadamberparams ZAFF.frcmod #Load ZAFF frcmod file

mol = loadpdb complex_noH.pdb 

bond mol.173.ZN mol.56.SG #Bond zinc ion with SG atom of residue CYM
bond mol.173.ZN mol.59.SG #Bond zinc ion with SG atom of residue CYM
bond mol.173.ZN mol.133.SG #Bond zinc ion with SG atom of residue CYM
bond mol.173.ZN mol.135.SG #Bond zinc ion with SG atom of residue CYM

solvateOct mol TIP3PBOX 15.0 # Solvate system

addions mol NA 0

savepdb mol complex_ZAFF_solvated.pdb #Save the pdb file
saveamberparm mol complex.prmtop complex.inpcrd #Save the topology and coordinate files
quit #Quit tleap